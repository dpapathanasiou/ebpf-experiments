# About

This is a simple example of tagging every [execve](https://linux.die.net/man/2/execve) event with a `Hello, BPF World!` message, based on the first example in the [Linux Observability with BPF](https://www.oreilly.com/library/view/linux-observability-with/9781492050193/) book.

# Build

Use the [Makefile](Makefile) to build both the BPF kernel module and its loader:

```sh
$ make bpfload
clang -O2 -target bpf -c hello_kernel.c -I/usr/src/linux-headers-5.10.0-17-amd64-common/include      -I/usr/include/x86_64-linux-gnu -I/usr/src/linux/tools/bpf/resolve_btfids/libbpf -I/usr/src/linux/tools/lib/bpf -I/usr/src/linux/tools/testing/selftests/bpf -o hello_kernel.o
clang  -o hello-bpf-monitor -lelf -I/usr/src/linux/samples/bpf -I/usr/src/linux/tools/lib -I/usr/src/linux/tools/perf -I/usr/src/linux/tools/include -I/usr/src/linux/tools/testing/selftests/bpf -L/usr/local/lib64 -lbpf \
        /usr/src/linux/samples/bpf/bpf_load.c /usr/src/linux/tools/testing/selftests/bpf/trace_helpers.c hello_loader.c
```

# Run

Invoke the resulting `hello-bpf-monitor` executable as root; commands by other users which invoke `execve` produce the `Hello, BPF World!` trace message:

```sh
# ./hello-bpf-monitor
            bash-604     [000] d...   780.706812: bpf_trace_printk: Hello, BPF World!
```